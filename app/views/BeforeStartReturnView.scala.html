@*
 * Copyright 2024 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import components.{BulletList, Caption, LinkWithHiddenText, PageHeading}
@import viewmodels.{BeforeStartReturnViewModel, ReturnPeriodViewModel}

@this(
        layout: templates.Layout,
        formHelper: FormWithCSRF,
        govukButton: GovukButton,
        govukDetails: GovukDetails,
        bulletList: BulletList,
        caption: Caption,
        linkWithHiddenText: LinkWithHiddenText,
        pageHeading: PageHeading,
        paragraph: components.Paragraph,
        govukWarningText: GovukWarningText
)


@(returnPeriod: ReturnPeriodViewModel, viewModel: BeforeStartReturnViewModel)(implicit request: Request[_], messages: Messages)

@layout(pageTitle = titleNoForm(messages("beforeStartReturn.title"))) {
    @formHelper(action = controllers.routes.BeforeStartReturnController.onSubmit(), Symbol("autoComplete") -> "off") {
        @caption(
            id = "before-start-return-section",
            text = messages("section.alcoholDutyReturn"),
        )

        @pageHeading(messages("beforeStartReturn.heading"))

        @paragraph(messages("beforeStartReturn.text.guidance1", returnPeriod.fromDate, returnPeriod.toDate))

        @paragraph(messages("beforeStartReturn.text.guidance2"))

        @paragraph(messages("beforeStartReturn.text.guidance3"))

        @bulletList(Seq(
            messages("beforeStartReturn.text.guidance3.usecase1"),
            messages("beforeStartReturn.text.guidance3.usecase2"),
            messages("beforeStartReturn.text.guidance3.usecase3"),
            messages("beforeStartReturn.text.guidance3.usecase4"),
            messages("beforeStartReturn.text.guidance3.usecase5")
        ))

        @paragraph(messages("beforeStartReturn.text.guidance4"))

        @paragraph(messages("beforeStartReturn.text.guidance5"))

        @govukDetails(Details(
            summary = messages("beforeStartReturn.details.summary"),
            content = HtmlContent(
                paragraph(HtmlContent(
                    Seq(
                        linkWithHiddenText(
                            id = "technical-guide-link",
                            text = messages("beforeStartReturn.details.p1.technicalGuide.link"),
                            href = messages("beforeStartReturn.details.p1.technicalGuide.url"),
                            visuallyHiddenContent = messages("beforeStartReturn.details.hidden"),
                            newTab = true
                        ),
                        messages("beforeStartReturn.details.p1.text1"),
                        linkWithHiddenText(
                            id = "vat-notice-link",
                            text = messages("beforeStartReturn.details.p1.vatNotice.link"),
                            href = messages("beforeStartReturn.details.p1.vatNotice.url"),
                            visuallyHiddenContent = messages("beforeStartReturn.details.hidden"),
                            newTab = true
                        ),
                        messages("beforeStartReturn.details.p1.text2")
                    ).mkString(" ")
                ))
                        +
                        paragraph(messages("beforeStartReturn.details.p2")).toString
                        +
                        bulletList(Seq(
                            HtmlContent(
                                linkWithHiddenText(
                                    id = "ex46-form-link",
                                    text = messages("beforeStartReturn.details.ex46.link"),
                                    href = messages("beforeStartReturn.details.ex46.url"),
                                    visuallyHiddenContent = messages("beforeStartReturn.details.hidden"),
                                    newTab = true
                                ) + " " + messages("beforeStartReturn.details.ex46.text")
                            ),
                            HtmlContent(
                                linkWithHiddenText(
                                    id = "w5-form-link",
                                    text = messages("beforeStartReturn.details.w5.link"),
                                    href = messages("beforeStartReturn.details.w5.url"),
                                    visuallyHiddenContent = messages("beforeStartReturn.details.hidden"),
                                    newTab = true
                                ) + messages("beforeStartReturn.details.w5.commaForWelsh") +
                                        " " + messages("beforeStartReturn.details.w5.text")
                            ),
                        ))
            )
        ))

        @govukWarningText(viewModel.warningText)

        @govukButton(
            ButtonViewModel("continueButton", messages("site.continue"))
        )
    }
}
